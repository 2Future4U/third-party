---


copyright:

  years: 2017, 2018

lastupdated: "2018-09-05"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:screen: .screen}
{:tip: .tip}

# 측정 통합
{: #meteringintera}

{{site.data.keyword.Bluemix}}는 오퍼링 사용량을 집계하는 데 여러 모델을 지원합니다. 오퍼링 제공자는 프로비저닝된 인스턴스에 대한 다양한 메트릭을 측정하고 해당 측정값을 측정 서비스에 제출합니다. 등급 서비스는 오퍼링 제공자가 선택하는 모델을 기반으로 제출된 사용량을 여러 버킷(인스턴스, 리소스 그룹 및 계정)으로 집계합니다. 플랜의 모든 메트릭에 대한 집계 및 등급 모델은 플랜에 대한 측정 및 등급 정의 문서에 포함됩니다.
{:shortdesc}

다음 목록은 예상되는 사용량 추적 및 제출에 대해 설명합니다.

*	서드파티 오퍼링 제공자는 무료 플랜의 경우 사용량을 제출할 필요가 없습니다.
*	서드파티 오퍼링 제공자는 월별 구독 플랜의 경우 사용량을 제출할 필요가 없습니다.
*	측정량 기반 플랜의 경우 모든 오퍼링 제공자는 시간별 사용량을 제출해야 합니다(Lite 플랜은 15분에서 1시간마다 제출해야 함).
*	오퍼링 제공자는 실패 응답을 다시 시도하는 자동화를 포함하여 사용량 제출을 자동화해야 합니다. {{site.data.keyword.Bluemix_notm}}는 실패한 제출에 대한 재시도 기능을 제공하지 않습니다. 자세한 정보는 [사용량 레코드 제출](/docs/third-party/submitusage.html#submitting-usage-records)의 상태 코드 및 조치 테이블을 참조하십시오.
*	현재 달의 사용량 레코드는 늦어도 다음 달 2일까지 제출해야 합니다.
*	{{site.data.keyword.Bluemix_notm}}는 월별 청구 주기에 맞게 구성되며 시간은 협정 세계시(UTC)로 표시됩니다.
*  오퍼링 제공자는 사용량 제출을 테스트하고 월별 청구 주기를 계산하는 방법을 알려주는 결과를 검증해야 합니다.

가격에 대한 일반 정보는 [비용 계산 방법](https://console.bluemix.net/docs/billing-usage/estimating_costs.html#cost)을 참조하십시오. 

## 구성 특성
{: #configure}

다음 특성은 오퍼링 플랜에 대한 사용량 제출이 측정되고 등급이 지정되는 방법을 정의합니다.

<dl>
<dt>단위</dt>
<dd>측정할 메트릭입니다(예: ApiCall, 바이트, 시간, 인스턴스 및 노드).</dd>
<dt>집계</dt>
<dd>특정된 단위 데이터가 컴파일되는 방법입니다(예: INSTANCES_BY_MONTH 또는 ACTIVE_HOURS_BY_MONTH).</dd>
<dt>측정 모델</dt>
<dd>사용량 제출 데이터가 처리되는 방법입니다. 다음 표를 참조하십시오.</dd>
<dt>리소스 이름</dt>
<dd>측정 중인 리소스의 이름입니다(예: 스토리지, 인스턴스, 가상 서버 또는 전송된 바이트 수).</dd>
<dt>단위 이름</dt>
<dd>기본 이름이 오퍼링과 관련 없는 경우 단위의 설명 이름입니다.</dd>
</dl>

## 측정 모델 유형
{: #metermodel}

다음 표에서는 사용 가능한 측정 모델을 보여줍니다.

|유형 |설명  |
|-----|-----|
| standard_add | 한 달 동안 제출된 모든 사용량 레코드의 양을 더합니다. | 
| standard_max  | 한 달 동안 제출된 모든 사용량 레코드의 최대 양입니다. | 
| standard_avg | 한 달 동안 제출된 모든 사용량 레코드의 평균 양입니다. |
| dailyproration_max | 일일 최대값을 계산합니다. 해당 월의 모든 일 수를 합산합니다. | 
| dailyproration_avg | 일일 평균값을 계산합니다. 해당 월의 모든 일 수를 합산합니다. |
| monthlyproration | 일일 비례 배분과 유사하게 계산되었지만 사용되는 가격은 해당 월의 총 일 수로 나눈 플랜 가격입니다(일일 가격). |
{: caption="표1. 측정 모델" caption-side="top"}

### 예제
{: #examples}

다음 각 예제에서 대시보드의 양은 다음 사용량이 제출되기 전이고 현재 사용량은 처리된 후입니다.

#### 표준 추가
{: #standard-add}

전체 달의 사용량을 계산합니다.

공식: ADD(사용량)

| 시간            | 보낸 사용량 | 계산 |대시보드의 수량 |
|-----------------|:-------------:| ----------- |:---------------------:|
| 1일(아침) |5             |5           |5                     |
| 1일(밤)   |5             | 5 + 5       |10                    |
| 2일(아침) |5             | 10 + 5      | 15                    |
| 3일(아침) |5             | 15 + 5      |20                    |
| 4일(밤)   |5             | 20 + 5      | 25                    |

#### 표준 평균
{: #standard-average}

전체 달의 평균 사용량을 계산합니다. 사용량 0을 제출해도 평균 계산에 사용됩니다.

공식: AVG(사용량)

| 시간            | 보낸 사용량 | 계산             |대시보드의 수량 |
|-----------------|:-------------:| ----------------------- |:---------------------:|
| 1일(아침) |4             | 4 / 1                   |4                     |
| 1일(밤)   | 0             | (4 + 0) / 2             |2                     |
| 2일(아침) |5             | (4 + 0 + 5) / 3         |3                     |
| 3일(아침) |3             | (4 + 0 + 5 + 3) / 4     |3                     |
| 4일(밤)   |3             | (4 + 0 + 5 + 3 + 3) / 5 |3                     |

#### 표준 최대
{: #standard-max}

전체 달의 최대 사용량을 계산합니다.

공식: MAX(사용량)

| 시간            | 보낸 사용량  | 계산  |대시보드의 수량 |
|-----------------|:--------------:| ------------ |:---------------------:|
| 1일(아침) |5              | MAX(5)       |5                     |
| 1일(밤)   |10             | MAX(5, 10)   |10                    |
| 2일(아침) | 0              | MAX(10, 0)   |10                    |
| 3일(아침) | 15             | MAX(10, 15)  | 15                    |
| 4일(밤)   |1              | MAX(15, 1)   | 15                    |

#### 일일 비례 배분 평균
{: #proration-average}

매일의 평균 사용량을 계산하고 해당 월의 평균을 계산합니다. 매일의 평균값을 더한 후 현재 지나간 일 수로 나눕니다(UTC).

공식: Summation(일일 평균값) / 청구 기간에서 지나간 일 수

이 양은 해당 월 동안 변경될 수 있지만 등급이 지정되는 양은 일일 평균 사용량입니다.

한 달이 30일인 경우:

| 시간               | 보낸 사용량    | 일일 평균 | 계산                            | 대시보드의 수량*                           |
| ------------------ | :--------------: | ------------- | ------------------                     | :----------------------------------------------: |
| 1일(아침)    |8                | 8 / 1         | 8 / 1                                  |8                                                |
| 1일(밤)      |3                | (8 + 3) / 2   | 5.5 / 1                                | 5.5(1일 EOD)                               |
| 2일(아침)    |2                | 2 / 1         | (5.5 + 2) / 2                          | 3.75                                             |
| 2일(밤)      |5                | (2 + 5) / 2   | (5.5 + 3.5) / 2                        | 4.5(2일 EOD)                               |
| 3일 - 15일    |1                | 1 / 1         | (5.5 + 3.5 + (1 + 13)  / 15            | 1.4666(15일 EOD)                          |
| 15일 - 30일   | 0                | 0 / 1         | (5.5 + 3.5 + (1 \* 12) + (0  \* 15) / 30 | 0.7333(30일 EOD)                          |

\* 사용량이 제출된 날과 같은 날에 표시됩니다.

#### 일일 비례 배분 최대값
{: #daily-proration}

일별 최대 사용량을 계산하고 해당 월의 평균을 계산합니다. 매일의 최대값을 더한 후 현재 지나간 일 수로 나눕니다(UTC).

공식: Summation(일별 최대값) / 청구 기간에서 지나간 일 수

이 양은 해당 월 동안 변경될 수 있지만 등급이 지정되는 양은 일일 최대 사용량입니다.

한 달이 30일인 경우:

| 시간             | 보낸 사용량  | 일별 최대값 | 계산                    | 대시보드의 수량* |
|------------------|:--------------:| --------- | ------------------------------ |:----------------------:|
| 1일(아침)  | 0              | MAX(0)    | 0 / 1                          | 0                      |
| 1일(밤)    |1              | MAX(0, 1) | 1 / 1                          |1                      |
| 2일 - 15일  |1              | MAX(1)    | (1 + 1 + ...) / day            |1                      |
| 15일 - 30일 | 0              | MAX(0)    | (1 + (1 * 14) + 0 + ...) / day | < 1                    |

\* 사용량이 제출된 날과 같은 날에 표시됩니다.

## 측정 및 등급 지정 스케일링 예제
{: #scale-examples}

스케일링 구성을 사용하여 단위 수량을 사용량 제출에서 보낸 양과 다르게 사용량 대시보드에 표시되는 양과 등급 지정 및 비용 계산에 사용되는 양으로 컴파일할 수 있습니다. 다음 예제에서는 이러한 시나리오를 보여줍니다.

### 사용자가 볼 수 있는 것보다 상세한 정보를 원하는 경우
{: #users}

보다 상세한 사용량 정보를 보내려고 하지만 사용자에게는 쉽게 읽을 수 있는 수로 표시하려고 합니다.

예를 들어 인스턴스의 트래픽을 바이트로 측정할 수 있지만 메가바이트 값을 집계하려고 할 수 있습니다. 이렇게 하려면 `scale` 1024를 **측정** 구성에 추가합니다.

### 가격 구성에 있는 것보다 상세한 정보를 원하는 경우
{: #pricing-configuration}

메트릭 가격을 $X/기가바이트로 책정하지만 이를 메가바이트로 보내려고 합니다. 메트릭 가격이 $1/기가바이트이지만 사용자가 0.5메가바이트를 사용한 경우 가격이 기가바이트 단위로 구성되어 있으므로 $1가 부과됩니다. `scale` 1024를 **등급 지정** 구성에 추가하고 `clip`을 `true`로 설정합니다.

이는 메트릭이 100개의 API 호출(또는 다른 일부 팩 크기)당 $X로 가격이 책정되는 경우에도 해당됩니다.

### 스케일을 측정과 등급 지정 레벨 모두에 적용하려는 경우
{: #metering-rating}

측정과 등급 지정 구성 모두에 스케일링을 추가할 수 있습니다. 바이트로 보내려고 하지만 사용자에게 메가바이트가 표시되는 경우 측정 스케일을 1024로 구성합니다. 측정 가격이 기가바이트인 경우 등급 지정 스케일을 1024로 구성할 수도 있습니다.

## 가격 모델
{: #pricing}

다음 표에서는 사용 가능한 가격 모델에 대한 자세한 정보를 제공합니다. 사용 가능한 여러 메트릭에 대해 연관된 가격 모델을 선택합니다.

|모델          |설명 | 계산 | 예(수량 5000개) |
|:-----------------|:-------------|:----------- |:---------------------|
| 선형         | 리소스당 단가(P)를 사용량(Q)으로 곱하여 총량(T)을 계산합니다.  | P*Q    | P=$1 T=1*5000 =$5000        |
| 비례 배분      | 리소스당 일별 단가(P)를 일별 사용량(Q)으로 곱하여 일별 총량을 계산합니다. 총 요금에는 해당 월의 모든 날에 대한 요금이 누적됩니다.         | T= (pd * Q1) + ...+(Pd *Qn)     | <ul><li>P= $30</li><li>Pd(일별 가격) =$30/30=$1 (한 달을 30일로 가정)</li><li>T1= $1 * 1 =$1</li><li>T2 = $1 * 0 =$0</li><li>Tn = 1 * 1 =$1</li><li>T = $1 + $0 +...+$1 = $5000</li></ul>     |
| 심플 티어(세부 티어)  | 모든 이용에 대한 단가에서 P*Q 모델은 수량이 속한 티어에 의해 결정됩니다.           | <ul><li>If Q is <=Q1, T=P1*Q</li><li>If Q1 < Q <=Q2, T=P2*Q</li><li>If Q2 < Q <=Q3, T=P3*Q</li></ul>     |   <ul><li>Q1=1000, P1=$1</li><li>Q2=2500, P2=$0.9</li><li>Q3=10000, P3=$0.75</li><li>T=$0.75*5000=$3750</li></ul>              |
| 세부 티어(단계 티어)   | 단가는 이용하는 양이 사전 정의된 다른 티어로 이동함에 따라 달라집니다. 총 요금에는 이전 티어의 요금이 누적됩니다.           | <ul><li>T1=P1*Q (0 < Q</li><li>If Q1 < Q <=Q2, T=T2</li><li>If Q2 < Q <=Q3, T=T3</li></ul>     | <ul><li>Q1=1000, P1=$1, T1=1*1000</li><li>Q2=1500, P2=$0.9, T2=0.9*1500</li><li>Q3=10000, P3=$0.75, T3=0.75*2500</li><li>T=1000 +1350+1875=$4225</li></ul>          |
| 블록 티어(최대)           | 요금이 부과되는 총 양은 블록 내에서 변하지 않는 "최대" 양으로 설정됩니다.     | <ul><li>If Q is <=Q1, T=T1</li><li>If Q1 < Q <=Q2, T=T2</li><li>If Q2 < Q <=Q3, T=T3</li></ul>    |  <ul><li>Q1=1000, T1=$0</li><li>Q2=2500, T2=2500</li><li>Q3=10000, T3=$4500</li><li>T=$4500</li></ul>            |


